---
title: "Dokumentacja projektu grupy C"
author: Wiktor Nied≈∫wiedzki, Dawid Skowro≈Ñski, Jakub Wiszniewski, Mateusz Broczkowski,
  Filip Michewicz
date: "`r Sys.Date()`"
output:
  html_document:
    number_section: true
    toc: true
    toc_depth: 3
  pdf_document:
    toc: true
    toc_depth: '3'
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, eval=TRUE, message=FALSE, warning=FALSE)
```

```{r wczytanie_danych}
library(RMariaDB)
library(knitr)

con <- dbConnect(RMariaDB::MariaDB(),
                 dbname = "team24",
                 username = "team24",
                 password = "te@mzaza",
                 host = "giniewicz.it")

query <- "SELECT * FROM stanowiska LIMIT 5;"
stanowiska <- dbGetQuery(con, query)

query <- "SELECT * FROM pracownicy LIMIT 5;"
pracownicy <- dbGetQuery(con, query)

query <- "SELECT * FROM urlopy LIMIT 5;"
urlopy <- dbGetQuery(con, query)

query <- "SELECT * FROM osoby LIMIT 5;"
osoby <- dbGetQuery(con, query)

query <- "SELECT * FROM dane_alarmowe LIMIT 5;"
dane_alarmowe <- dbGetQuery(con, query)

query <- "SELECT * FROM oferty LIMIT 5;"
oferty <- dbGetQuery(con, query)

query <- "SELECT * FROM kierunki LIMIT 5;"
kierunki <- dbGetQuery(con, query)

query <- "SELECT * FROM miasta LIMIT 5;"
miasta <- dbGetQuery(con, query)

query <- "SELECT * FROM rodzaje LIMIT 5;"
rodzaje <- dbGetQuery(con, query)

query <- "SELECT * FROM cennik LIMIT 5;"
cennik <- dbGetQuery(con, query)

query <- "SELECT * FROM zorganizowana_wycieczka LIMIT 5;"
zorganizowana_wycieczka <- dbGetQuery(con, query)

query <- "SELECT * FROM osoby_zorganizowana_wycieczka LIMIT 5;"
osoby_zorganizowana_wycieczka <- dbGetQuery(con, query)

query <- "SELECT * FROM pracownicy_wycieczka ORDER BY id_wycieczki LIMIT 5;"
pracownicy_wycieczka <- dbGetQuery(con, query)

dbDisconnect(con)
```
# U≈ºyte technologie

## Python

- **numpy** ‚Äì biblioteka Pythona do oblicze≈Ñ numerycznych, oferujƒÖca wszechstronny typ danych `ndarray`, kt√≥ry umo≈ºliwia szybkie i wydajne operacje na du≈ºych zbiorach danych, w tym macierzach i wektorach.
- **math** ‚Äì modu≈Ç standardowy Pythona zawierajƒÖcy funkcje matematyczne, takie jak `sin`, `cos`, `sqrt` i inne, przydatne w obliczeniach numerycznych i algorytmicznych.
- **random** ‚Äì modu≈Ç Pythona s≈Çu≈ºƒÖcy do generowania liczb losowych. Umo≈ºliwia tworzenie liczb zmiennoprzecinkowych, liczb ca≈Çkowitych oraz wybieranie losowych element√≥w z kolekcji.
- **pandas** ‚Äì biblioteka Pythona do manipulacji i analizy danych, kt√≥ra wprowadza struktury danych takie jak `DataFrame` oraz `Series`, umo≈ºliwiajƒÖc wygodne operowanie na danych tabelarycznych.
- **datetime** ‚Äì modu≈Ç Pythona umo≈ºliwiajƒÖcy pracƒô z datami i czasem. Oferuje klasy i funkcje do operacji na datach, czasach i przedzia≈Çach czasowych.
- **faker** ‚Äì biblioteka Pythona s≈Çu≈ºƒÖca do generowania sztucznych danych, takich jak imiona, adresy, numery telefon√≥w, kt√≥re mogƒÖ byƒá u≈ºywane do testowania aplikacji lub generowania danych w aplikacjach wideo.
- **mysql.connector** ‚Äì oficjalny modu≈Ç Pythona umo≈ºliwiajƒÖcy ≈ÇƒÖczenie siƒô z bazami danych MySQL. Umo≈ºliwia wykonywanie zapyta≈Ñ, wstawianie danych oraz zarzƒÖdzanie bazƒÖ danych w aplikacjach Pythonowych.
- **csv** ‚Äì biblioteka Pythona do szybkiej i wygodnej manipulacji plikami CSV, zoptymalizowana pod kƒÖtem du≈ºych zbior√≥w danych. Umo≈ºliwia ≈Çatwe odczytywanie, zapisywanie i analizowanie plik√≥w CSV.

## MariaDB

## RStudio

- **RMariaDB** ‚Äì biblioteka w jƒôzyku R s≈Çu≈ºƒÖca do ≈ÇƒÖczenia siƒô i pracy z bazami danych MariaDB oraz MySQL. Pozwala na wykonywanie zapyta≈Ñ SQL, wstawianie, aktualizowanie i pobieranie danych.
- **ggplot2** ‚Äì biblioteka w jƒôzyku R do tworzenia zaawansowanych wizualizacji danych. Bazuje na koncepcji gramatu wizualizacji i umo≈ºliwia tworzenie wykres√≥w na podstawie danych w bardzo elastyczny spos√≥b.
- **dplyr** ‚Äì biblioteka w jƒôzyku R, kt√≥ra zapewnia narzƒôdzia do manipulacji danymi. Wykorzystuje polecenia analogiczne do zapyta≈Ñ SQL.
- **zoo** ‚Äì biblioteka w jƒôzyku R umo≈ºliwiajƒÖca pracƒô z czasowymi danymi szeregowymi, wspiera obliczenia na szeregach czasowych.
- **knitr** ‚Äì biblioteka w jƒôzyku R wykorzystywana do generowania raport√≥w w r√≥≈ºnych formatach, takich jak HTML, PDF czy Word. Umo≈ºliwia tworzenie dynamicznych dokument√≥w.
- **scales** ‚Äì biblioteka w jƒôzyku R, kt√≥ra dostarcza funkcje do manipulacji etykietami i formatami jednostek osi wykres√≥w.
- **stringr** - biblioteka w jƒôzyku R s≈Çu≈ºƒÖca do pracy z danymi tekstowymi.

## VS Code

- **SQLTools MySQL/MariaDB/TiDB** - rozszerzenie, pozwalajƒÖce wygodnie po≈ÇƒÖczyƒá siƒô z serwerem bazodanowym, u≈ºywany do wysy≈Çania zapyta≈Ñ
- **ERD Editor** - rozszerzenie, dziƒôki kt√≥remu mo≈ºna tworzyƒá schemat baz danych oraz pobieraƒá z niego kod generujƒÖcy struktury tabel

# Pliki

- **jak_uruchomic.txt** - instrukcja poprawnej kolejno≈õci uruchamiania poszczeg√≥lnych plik√≥w projektu
- **Generator/generator_danych.ipynb** - generuje i odpowiednio modyfikuje dane do tabel, oraz zapisuje je do plik√≥w .csv
- **Generator/tworzenie_bazy.ipynb** - tworzy tabele w bazie danych, wype≈Çnia je danymi z plik√≥w .csv i odpowiednio obchodzi siƒô z NULL-ami
- **Dokumenty/schemat_bazy_projekt.json** - schemat bazy danych
- **Dokumenty/dokumentacja.Rmd** - plik generujƒÖcy dokumentacjƒô
- **Dokumenty/dokumentacja.html** - wygenerowana dokumentacja
- **Dokumenty/analiza_danych.Rmd** - plik generujƒÖcy analizƒô danych
- **Dokumenty/analiza_danych.html** - wygenerowana analiza
- **Dokumenty/.Rhistory** - automatycznie tworzony plik, zapisuje historiƒô kod√≥w w R
- **Dane do generatora/wycieczki.xlsx** - obecnie oferowane wycieczki przez Wombat Grylls sp. z o.o.
- **Dane do generatora/cennik.csv** - cennik wycieczek
- **Dane do generatora/stanowiska.xlsx** - stanowiska pracownik√≥w firmy, wraz z wysoko≈õciƒÖ wynagrodzenia
- **Dane do generatora/imiona.csv, nazwiska_damskie.csv, nazwiska_mƒôskie.csv** - dane z GUS-u s≈Çu≈ºƒÖce do generowania klient√≥w, pracownik√≥w oraz danych alarmowe
- **Dane do tabel/oferty.csv** - szczeg√≥≈Çowe informacje na temat organizowanych przez firmƒô event√≥w
- **Dane do tabel/cennik.csv** - zawiera informacje o cenach za udzia≈Ç, koszt na osobƒô oraz koszt organizacji dla poszczeg√≥lnych wycieczek
- **Dane do tabel/kierunki.csv** - w jakich miejscach odbywajƒÖ siƒô eventy
- **Dane do tabel/miasta.csv** - w jakich miastach
- **Dane do tabel/rodzaje.csv** - jakie rodzaje oferujemy
- **Dane do tabel/osoby.csv** - dane klient√≥w, czyli: imiƒô, nazwisko, numer telefonu, e-mail oraz dane alarmowe
- **Dane do tabel/dane_alarmowe.csv** - imiona, nazwiska i numery telefon√≥w do os√≥b, z kt√≥rymi firma ma siƒô kontaktowaƒá w razie problem√≥w
- **Dane do tabel/stanowiska.csv** - taki sam jak wcze≈õniej, zapisany w odpowiednim formacie
- **Dane do tabel/pracownicy.csv** - informacje o zatrudnianych przez nas pracownikach
- **Dane do tabel/pracownik_urlop.csv** - informacje o urlopach poszczeg√≥lnych pracownik√≥w
- **Dane do tabel/zorganizowana_wycieczka.csv** - opis wycieczki, czyli: jaka to by≈Ça oferta, ile os√≥b pojecha≈Ço i kiedy siƒô odby≈Ça
- **Dane do tabel/pracownicy_wycieczka.csv** - kt√≥ry pracownik pojecha≈Ç na kt√≥rƒÖ wycieczkƒô
- **Dane do tabel/osoby_zorganizowana_wycieczka.csv** - kto pojecha≈Ç na kt√≥rƒÖ wycieczkƒô, kiedy za niƒÖ zap≈Çaci≈Ç i jak jƒÖ ocenia
- **Reszta** - katalog zawierajƒÖcy pliki pomocnicze, wykorzystywane w trakcie tworzenia projektu 

# Lista zale≈ºno≈õci funkcyjnych

## stanowiska
```{r stanowiska}
kable(stanowiska, align = "c")
```
$\Sigma$ = {A $\rightarrow$ BC, B $\rightarrow$ AC}  

* Klucze kandydujƒÖce: A, B
* Klucze elementarne: A, B
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, B

## pracownicy
```{r pracownicy}
kable(pracownicy, align = "c")
```
$\Sigma$ = {A $\rightarrow$ BCDEFGH, G $\rightarrow$ ABCDEFH, H $\rightarrow$ ABCDEFG}    

Czemu nie BCDEH $\rightarrow$ AFG?  
Uznajemy, ≈ºe los jest przekrƒôtny i mo≈ºe siƒô trafiƒá, ≈ºe na chwilƒô obecnƒÖ dwie osoby majƒÖ to samo imiƒô, nazwisko, datƒô zatrudnienia, stanowisko oraz jednocze≈õnie zatrudnione lub nie. Gdyby≈õmy jednak uznali, ≈ºe kt√≥ry≈õ podzbi√≥r BCDEH wyznacza pracownika, to tym samym wyznacza≈Çby ca≈Çy wiersz na jego temat i stanowi≈Çby tym samym nadklucz, nie psujƒÖc EKNF

* Klucze kandydujƒÖce: A, G, H
* Klucze elementarne: A, G, H
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, G, H

## urlopy
```{r urlopy}
kable(urlopy, align = "c")
```
$\Sigma$ = {AB $\rightarrow$ C, AC $\rightarrow$ B}  

Czemu nie BC $\rightarrow$ A?
Dw√≥ch pracownik√≥w mo≈ºe mieƒá urlopy w tym samym terminie.

* Klucze kandydujƒÖce: AB, AC
* Klucze elementarne: AB, AC
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, B, C

## osoby
```{r osoby}
kable(osoby, align = "c")
```
$\Sigma$ = {A $\rightarrow$ BCDEF, D $\rightarrow$ ABCEF, E $\rightarrow$ ABCDF}  

Czemu nie BCF $\rightarrow$ ADEG?  
Mo≈ºemy mieƒá osoby o tym samym imieniu i nazwisku, kt√≥re wyznaczajƒÖ tƒô samƒÖ osobƒô jako kontaktowƒÖ w razie problem√≥w, np. mama, kolega czy siostra.

* Klucze kandydujƒÖce: A, D, E
* Klucze elementarne: A, D, E
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, D, E

## dane_alarmowe
```{r dane_alarmowe}
kable(dane_alarmowe, align = "c")
```
$\Sigma$ = {A $\rightarrow$ BCD, D $\rightarrow$ ABC}  

* Klucze kandydujƒÖce: A, D  
* Klucze elementarne: A, D  
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, D

## oferty
```{r oferty}
kable(oferty, align = "c")
```
$\Sigma$ = {A $\rightarrow$ BCDEFGHI, G $\rightarrow$ ABCDEFHI}  

1. Nazwa nie jest unikalna - mo≈ºemy mieƒá dwie wycieczki o tej samej nazwie, ale np. w innych miejscach
2. Opis te≈º mo≈ºe siƒô powtarzaƒá
3. id_cennika za to jest unikatowe, aby:
    1. Da≈Ço siƒô w razie potrzeby ≈Çatwo zmieniƒá ceny
    2. Zachowaƒá informacjƒô o dawnych cenach przy ustalaniu nowych

* Klucze kandydujƒÖce: A, G
* Klucze elementarne: A, G  
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, G

## kierunki
```{r kierunki}
kable(kierunki, align = "c")
```
$\Sigma$ = {A $\rightarrow$ B, B $\rightarrow$ A}  

* Klucze kandydujƒÖce: A, B  
* Klucze elementarne: A, B  
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, B

## miasta
```{r miasta}
kable(miasta, align = "c")
```
$\Sigma$ = {A $\rightarrow$ B, B $\rightarrow$ A}  

* Klucze kandydujƒÖce: A, B  
* Klucze elementarne: A, B  
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, B

## rodzaje
```{r rodzaje}
kable(rodzaje, align = "c")
```
$\Sigma$ = {A $\rightarrow$ B, B $\rightarrow$ A}  

* Klucze kandydujƒÖce: A, B  
* Klucze elementarne: A, B  
* Klucz g≈Ç√≥wny: A
* Atrybuty elementarne: A, B

## cennik
```{r cennik}
kable(cennik, align = "c")
```
$\Sigma$ = {A $\rightarrow$ BCD}


Nie mamy ≈ºadnej innej relacji, gdy≈º wszelkie ceny i koszty sƒÖ indywidualne dla wszystkich ofert (aby ≈Çatwiej mo≈ºna by≈Ço w przysz≈Ço≈õci np. zmieniƒá ceny lub zachowaƒá informacje o starych) i mo≈ºe siƒô zdarzyƒá, ≈ºe np. dwa wydarzenia majƒÖ tƒÖ samƒÖ cenƒô i koszt na osobƒô, ale r√≥≈ºne koszta organizacji (np. wynajƒôcie ratownika medycznego).

* Klucz kandydujƒÖcy: A 
* Klucz elementarny: A
* Klucz g≈Ç√≥wny: A
* Atrybut elementarny: A

## zorganizowana_wycieczka
```{r zorganizowana_wycieczka}
kable(zorganizowana_wycieczka, align = "c")
```
$\Sigma$ = {A $\rightarrow$ BC, BC $\rightarrow$ A}  

Czemu nie C $\rightarrow$ AB, ale za to BC $\rightarrow$ A?  
Tego samego dnia moga rozpoczƒÖƒá siƒô dwie r√≥≈ºne wycieczki, ale o dw√≥ch r√≥≈ºnych ofertach.  

* Klucz kandydujƒÖcy: A 
* Klucz elementarny: A  
* Klucz g≈Ç√≥wny: A
* Atrybut elementarny: A

## osoby_zorganizowana_wycieczka
```{r osoby_zorganizowana_wycieczka}
kable(osoby_zorganizowana_wycieczka, align = "c")
```
$\Sigma$ = {AB $\rightarrow$ CD}  

Czemu nie BC $\rightarrow$ AD?  
Bo jedna osoba mo≈ºe tego samego dnia zap≈Çaciƒá za dwie r√≥≈ºne wycieczki oraz r√≥≈ºnie je oceniƒá.  
Czemu nie BCD $\rightarrow$ A?  
Oczywi≈õcie mo≈ºe siƒô zdarzyƒá, ≈ºe jedna osoba tak samo oceni i tego samego dnia zap≈Çaci za dwie r√≥≈ºne wycieczki.

* Klucze kandydujƒÖce: AB  
* Klucze elementarne: AB  
* Klucz g≈Ç√≥wny: AB
* Atrybuty elementarne: A, B

## pracownicy_wycieczka
```{r pracownicy_wycieczka}
kable(pracownicy_wycieczka, align = "c")
```
$\Sigma$ = $\emptyset$  

Pracownik jedzie na wiele wycieczek; Na jednƒÖ wycieczkƒô jedzie dw√≥ch pracownik√≥w.

## Czy baza jest w EKNF?

Tak, poniewa≈º ka≈ºda relacja nietrywialna zaczyna siƒô od nadklucza (w tym niekt√≥re ko≈ÑczƒÖ siƒô r√≥wnie≈º na atrybutach elementarnych).

# Co by≈Ço najtrudniejsze w projekcie

1. Zebranie siƒô do pracy po feriach ≈õwiƒÖtecznych.
2. Wymy≈õlenie sposobu, jak sensownie generowaƒá dane.
3. Uwzglƒôdnienie wszystkich zale≈ºno≈õci w danych (np. dat).
4. Zrozumienie r√≥≈ºnicy miƒôdzy kluczem g≈Ç√≥wnym a elementarnym (aby poprawnie wykonaƒá normalizacjƒô na poziomie EKNF).
5. Stworzenie lokalnej i dzia≈ÇajƒÖcej bazy danych (zako≈Ñczone pora≈ºkƒÖ, musieli≈õmy prosiƒá doktora Giniewicza o miejsce na serwerze üòî).